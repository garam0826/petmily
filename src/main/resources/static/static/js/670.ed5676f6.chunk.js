"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[670],{670:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var a=n(43),c=n(154),l=n(216),s=n(475),d=n(3),o=n(579);const r=function(){const e=(0,l.Zp)(),{idx:t}=(0,l.g)(),{reply_idx:n}=(0,l.g)(),[r,i]=(0,a.useState)({}),[h,x]=(0,a.useState)([]),[u,m]=(0,a.useState)(""),[j,g]=(0,a.useState)(null),[p,b]=(0,a.useState)(""),[_,f]=(0,a.useState)(null),v=(0,d.d4)((e=>e.userData)),C=v?v.mem_id:"",k=(new Date).toISOString();return(0,a.useEffect)((()=>{c.A.get("/board/Content?idx=".concat(t)).then((e=>{const t=e.data;i(t.boardDTO),x(t.r_List)})).catch((e=>{console.error("There was an error retrieving the board: ",e)}))}),[t]),(0,o.jsxs)("div",{className:"content-container",children:[(0,o.jsx)("div",{className:"title",children:r.title}),(0,o.jsxs)("div",{className:"meta-info",children:["\uc791\uc131\uc790: ",r.reg_name," | \uc870\ud68c\uc218: ",r.hit," | \uc791\uc131 \uc2dc\uac04: ",r.w_date," | \uc218\uc815 \uc2dc\uac04: ",r.u_date]}),(0,o.jsx)("div",{className:"content",children:r.content}),(0,o.jsxs)("div",{className:"content",children:[r.reg_name===C&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.N_,{to:"/board/list/edit/".concat(t),children:(0,o.jsx)("button",{children:"\uc218\uc815"})}),(0,o.jsx)("button",{onClick:async()=>{r.reg_name===C?await c.A.delete("/board/DeleteBoard?idx=".concat(t)).then((t=>{console.log("\uac8c\uc2dc\uae00 \uc0ad\uc81c \uc131\uacf5:",t.data),e("/board/list")})).catch((e=>{console.error("\uac8c\uc2dc\uae00 \uc0ad\uc81c \uc2e4\ud328:",e)})):alert("\ubcf8\uc778\uc758 \uae00\ub9cc \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")},children:"\uc0ad\uc81c"})]}),(0,o.jsx)("button",{onClick:()=>e("/board/list"),children:"\ubaa9\ub85d"})]}),(0,o.jsx)("h3",{children:"\ub313\uae00"}),(0,o.jsx)("ul",{className:"comment-list",children:h.map((e=>(0,o.jsx)("li",{className:"comment-item",children:j===e.idx?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("textarea",{value:p,onChange:e=>b(e.target.value)}),(0,o.jsx)("button",{onClick:()=>(async e=>{e.reg_name===C?await c.A.put("/board/UpdateReply",{...e,content:p,u_date:k}).then((t=>{console.log("\ub313\uae00 \uc218\uc815 \uc131\uacf5:",t.data),x((t=>t.map((t=>t.idx===e.idx?{...t,content:p,u_date:k}:t)))),g(null),b("")})).catch((e=>{console.error("\ub313\uae00 \uc218\uc815 \uc2e4\ud328:",e)})):alert("\ubcf8\uc778\uc758 \ub313\uae00\ub9cc \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")})(e),children:"\uc218\uc815 \uc644\ub8cc"}),(0,o.jsx)("button",{onClick:()=>{g(null),b("")},children:"\ucde8\uc18c"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"comment-content",children:e.content}),(0,o.jsxs)("div",{className:"comment-info",children:["\uc791\uc131\uc790: ",e.reg_name," | \uc791\uc131 \uc2dc\uac04: ",e.w_date]}),e.reg_name===C&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>{g(e.idx),b(e.content)},children:"\uc218\uc815"}),(0,o.jsx)("button",{onClick:()=>(async e=>{h.find((t=>t.idx===e)).reg_name===C?await c.A.delete("/board/DeleteReply?idx=".concat(e)).then((t=>{console.log("\ub313\uae00 \uc0ad\uc81c \uc131\uacf5:",t.data),x((t=>t.filter((t=>t.idx!==e))))})).catch((e=>{console.error("\ub313\uae00 \uc0ad\uc81c \uc2e4\ud328:",e)})):alert("\ubcf8\uc778\uc758 \ub313\uae00\ub9cc \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")})(e.idx),children:"\uc0ad\uc81c"})]}),(0,o.jsx)("button",{onClick:()=>f(e.idx),children:"\ub313\uae00 \ub2ec\uae30"})]})},e.idx)))}),(0,o.jsxs)("div",{className:"comment-input",children:[(0,o.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),placeholder:"\ub313\uae00\uc744 \uc791\uc131\ud558\uc138\uc694"}),(0,o.jsx)("input",{type:"hidden",name:_}),(0,o.jsx)("button",{onClick:async()=>{const e={reply_idx:n,boardIdx:t,content:u,reg_name:C,step:1,depth:1,w_date:k,u_date:k};if(null!=_){const t=h.find((e=>e.idx===_));e.step=t.step+1,e.depth=t.depth+1,e.reply_idx=_}await c.A.post("/board/WriteReply",e).then((e=>{console.log("\ub313\uae00 \uc791\uc131 \uc131\uacf5:",e.data),x([...h,e.data]),m(""),f(null)})).catch((e=>{console.error("\ub313\uae00 \uc791\uc131 \uc2e4\ud328:",e)}))},children:"\ub313\uae00 \uc791\uc131"})]})]})}}}]);
//# sourceMappingURL=670.ed5676f6.chunk.js.map