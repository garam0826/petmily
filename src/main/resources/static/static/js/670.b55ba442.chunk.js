"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[670],{2131:(e,t,n)=>{n.d(t,{A:()=>c});n(5043);var r=n(3216),s=n(5475),a=n(3003),l=n(2306),i=n(5547),d=(n(8790),n(579));const c=function(){const e=(0,r.Zp)(),t=(0,a.wA)(),n=l.A.getState();return(0,d.jsxs)("div",{className:"menubar",children:[n.isLoggedIn?(0,d.jsx)("button",{className:"login",onClick:()=>{t((0,i.ri)()),e("/main")},children:"\ub85c\uadf8\uc544\uc6c3"}):(0,d.jsx)("button",{className:"login",onClick:()=>e("/member/login"),children:"\ub85c\uadf8\uc778"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{onClick:()=>e("/main"),children:"\ud648"}),(0,d.jsx)("li",{onClick:()=>e("/animal"),children:"\ubcf4\ud638 \uc911\uc778 \ub3d9\ubb3c"}),(0,d.jsx)("li",{onClick:()=>e("/recommend"),children:"\ubc18\ub824\uacac \ucd94\ucc9c"}),(0,d.jsx)("li",{onClick:()=>e("/board/list"),children:"\uac8c\uc2dc\ud310"}),(0,d.jsxs)("li",{className:"dropdown",children:[(0,d.jsx)("span",{children:"\ud68c\uc6d0 \uc815\ubcf4"}),(0,d.jsxs)("div",{className:"dropdown-content",children:[(0,d.jsx)(s.N_,{to:"/member/mypage",children:"\uc815\ubcf4 \ud655\uc778 \ubc0f \uc218\uc815"}),(0,d.jsx)(s.N_,{to:"/member/mypage/mycart",children:"\ucc1c \ubaa9\ub85d"}),(0,d.jsx)(s.N_,{to:"/member/mypage/mycontent",children:"\ub0b4\uac00 \uc791\uc131\ud55c \uae00\uacfc \ub313\uae00"}),(0,d.jsx)(s.N_,{to:"/member/mypage/imgUpload",children:"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc"})]})]})]})]})}},4670:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(5043),s=n(7154),a=n(3216),l=n(5475),i=n(3003),d=n(2131),c=n(579);const o=function(){const e=(0,a.Zp)(),{idx:t}=(0,a.g)(),[n,o]=(0,r.useState)({}),[x,p]=(0,r.useState)([]),[h,m]=(0,r.useState)(""),[u,_]=(0,r.useState)(null),[j,y]=(0,r.useState)(""),[g,b]=(0,r.useState)({}),[C,v]=(0,r.useState)({}),w=(0,i.d4)((e=>e.userData)),N=w?w.mem_id:"",k=e=>{if(!e)return"";const[t]=e.split("T");return t};(0,r.useEffect)((()=>{s.A.get("/board/Content?idx=".concat(t)).then((e=>{const t=e.data;o(t.boardDTO),p(t.r_List)})).catch((e=>{console.error("There was an error retrieving the board: ",e)}))}),[t]);const S=x.sort(((e,t)=>e.step===t.step?e.depth-t.depth:e.step-t.step));return(0,c.jsxs)("div",{children:[(0,c.jsx)(d.A,{}),(0,c.jsxs)("div",{className:"content-container",children:[(0,c.jsx)("div",{className:"title",children:n.title}),(0,c.jsxs)("div",{className:"meta-info",children:["\uc791\uc131\uc790: ",n.reg_name," | \uc870\ud68c\uc218: ",n.hit," | \uc791\uc131\uc77c: ",k(n.w_date)," | \uc218\uc815\uc77c: ",k(n.u_date)]}),(0,c.jsx)("div",{className:"content",children:n.content}),(0,c.jsxs)("div",{className:"content",children:[n.reg_name===N&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.N_,{to:"/board/list/edit/".concat(t),children:(0,c.jsx)("button",{children:"\uc218\uc815"})}),(0,c.jsx)("button",{onClick:async()=>{if(n.reg_name===N)try{await s.A.delete("/board/DeleteBoard?idx=".concat(t)),e("/board/list")}catch(r){console.error("\uac8c\uc2dc\uae00 \uc0ad\uc81c \uc2e4\ud328:",r.response?r.response.data:r.message)}else alert("\ubcf8\uc778\uc758 \uae00\ub9cc \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")},children:"\uc0ad\uc81c"})]}),(0,c.jsx)("button",{onClick:()=>e("/board/list"),children:"\ubaa9\ub85d"})]}),(0,c.jsx)("h3",{children:"\ub313\uae00"}),(0,c.jsx)("ul",{className:"comment-list",children:S.map((e=>(0,c.jsx)("li",{className:"comment-item",children:u===e.reply_idx?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("textarea",{value:j,onChange:e=>y(e.target.value)}),(0,c.jsx)("button",{onClick:()=>(async e=>{if(e.reg_name===N)try{await s.A.put("/board/UpdateReply",{...e,content:j,u_date:(new Date).toISOString()}),p((t=>t.map((t=>t.reply_idx===e.reply_idx?{...t,content:j,u_date:(new Date).toISOString()}:t)))),_(null),y("")}catch(t){console.error("\ub313\uae00 \uc218\uc815 \uc2e4\ud328:",t.response?t.response.data:t.message)}else alert("\ubcf8\uc778\uc758 \ub313\uae00\ub9cc \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")})(e),children:"\uc218\uc815 \uc644\ub8cc"}),(0,c.jsx)("button",{onClick:()=>{_(null),y("")},children:"\ucde8\uc18c"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"comment-content",children:[e.depth>1&&(0,c.jsx)("span",{className:"reply-indent",children:"\u21b3 "}),e.content]}),(0,c.jsxs)("div",{children:["\uc791\uc131\uc790: ",e.reg_name," | \uc791\uc131\uc77c: ",k(e.w_date)]}),e.reg_name===N&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:()=>{_(e.reply_idx),y(e.content)},children:"\uc218\uc815"}),(0,c.jsx)("button",{onClick:()=>(async e=>{if(x.find((t=>t.reply_idx===e)).reg_name===N)try{await s.A.delete("/board/DeleteReply?idx=".concat(e)),p((t=>t.filter((t=>!(t.reply_idx===e||t.parent_reply_idx===e)))))}catch(t){console.error("\ub313\uae00 \uc0ad\uc81c \uc2e4\ud328:",t.response?t.response.data:t.message)}else alert("\ubcf8\uc778\uc758 \ub313\uae00\ub9cc \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")})(e.reply_idx),children:"\uc0ad\uc81c"})]}),(0,c.jsx)("button",{onClick:()=>v((t=>({...t,[e.reply_idx]:!t[e.reply_idx]}))),children:"\ub313\uae00 \ub2ec\uae30"}),C[e.reply_idx]&&(0,c.jsxs)("div",{className:"reply-input",children:[(0,c.jsx)("textarea",{value:g[e.reply_idx]||"",onChange:t=>b({...g,[e.reply_idx]:t.target.value}),placeholder:"\ub313\uae00\uc744 \uc791\uc131\ud558\uc138\uc694"}),(0,c.jsx)("button",{onClick:()=>(async(e,n)=>{const r=x.find((t=>t.reply_idx===e)),a={reply_idx:e,board_idx:t,content:n,reg_name:N,step:r.step+1,depth:r.depth+1,w_date:(new Date).toISOString(),u_date:(new Date).toISOString()};try{const t=await s.A.post("/board/WriteReply",a),n={...a,reply_idx:t.data.reply_idx};p((t=>{const s=t.findIndex((t=>t.reply_idx===e)),a=[...t];let l=s+1;for(;l<a.length&&a[l].depth>r.depth;)l++;return a.splice(l,0,n),a})),v((t=>({...t,[e]:!1}))),b((t=>({...t,[e]:""})))}catch(l){console.error("\ub300\ub313\uae00 \uc791\uc131 \uc2e4\ud328:",l.response?l.response.data:l.message)}})(e.reply_idx,g[e.reply_idx]),children:"\ub313\uae00 \ub2ec\uae30"}),(0,c.jsx)("button",{onClick:()=>{v((t=>({...t,[e.reply_idx]:!1}))),b((t=>({...t,[e.reply_idx]:""})))},children:"\ucde8\uc18c"})]})]})},e.reply_idx)))}),(0,c.jsxs)("div",{className:"comment-input",children:[(0,c.jsx)("textarea",{value:h,onChange:e=>m(e.target.value),placeholder:"\ub313\uae00\uc744 \uc791\uc131\ud558\uc138\uc694"}),(0,c.jsx)("button",{onClick:async()=>{const e={reply_idx:0,board_idx:t,content:h,reg_name:N,step:1,depth:1,w_date:(new Date).toISOString(),u_date:(new Date).toISOString()};try{const t=await s.A.post("/board/WriteReply",e),n={...e,reply_idx:t.data.reply_idx};p((e=>[...e,n])),m("")}catch(n){console.error("\ub313\uae00 \uc791\uc131 \uc2e4\ud328:",n.response?n.response.data:n.message)}},children:"\ub313\uae00 \ub2ec\uae30"})]})]})]})}},8790:()=>{}}]);
//# sourceMappingURL=670.b55ba442.chunk.js.map